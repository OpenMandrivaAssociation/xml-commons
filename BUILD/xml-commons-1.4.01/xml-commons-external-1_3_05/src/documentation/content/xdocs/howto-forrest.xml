<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.2//EN" "document-v12.dtd">
<document> 
  <header> 
    <title>How to produce xml-commons website with Forrest</title> 
    <authors>
      <person name="David Crossley" email="crossley@apache.org"/> 
    </authors> 
  </header> 
  <body> 
    <section id="overview">
      <title>Overview</title>
      <p>
        This is the procedure for building the initial xml-commons website
        with Forrest.
      </p>
    </section>

    <section id="install">
      <title>Install Forrest version 0.5 on localhost</title>
      <p>
        Follow the document:
        <link href="site:forrest/your-project">Using
        Forrest</link>
      </p>
    </section>

    <section id="seed">
      <title>Seed the new website</title>
      <p>
        This only needed to be done to start and it is done now and committed
        to CVS.
      </p>
<source><![CDATA[
cd /usr/local/cvs/xml-commons
forrest seed
vi src/documentation/skinconf.xml
]]></source>
    </section>

    <section id="content">
      <title>Edit the content</title>
<source><![CDATA[
vi src/documentation/content/xdocs/*.xml
 (DC already copied content from README.html and split it.)
]]></source>
      <p>The xdocs source are now ready for anyone to enhance the content.</p>
    </section>

    <section id="build">
      <title>Build it and view it</title>
<source><![CDATA[
cd /usr/local/cvs/xml-commons
ant
... this will build everything (website docs, javadocs, distribution)
mozilla file:///usr/local/cvs/xml-commons/build/site/index.html
]]></source>
      <p>For better turnaround when developing docs, you can do
        <code>'forrest'</code> which just validates and builds the docs.
        If you want to only validate the xdocs then do
        <code>'forrest validate-xdocs'</code>. You can get even faster
        turnaround with the targets <code>'forrest run'</code> and
        <code>'forrest backcopy'</code> (beware with that) to run a
        live forrest webapp.
        Do <code>'forrest -projecthelp'</code> for more tips. Anyway, see the
        <link href="site:forrest/your-project">Using Forrest</link>
        document.
      </p>
    </section>

    <section id="xml-site">
      <title>Updating the website</title>
      <p>Copy everything in <code>./build/site</code> over to the xml-site
        repository at <code>xml-site/targets/commons</code> and commit.
      </p>
      <p>There is a cronjob on www.apache.org that does a regular cvs checkout
        to refresh the website.
      </p>
    </section>

    <section id="other">
      <title>Other notes</title>
<p>
There are some other general notes at <code>xml-commons/readme-build.txt</code>
</p>

<p>
A project sitemap has been added at
<code>src/documentation/sitemap.xmap</code> of which we only use a small
portion. This portion has been marked with comments to enable easier sync
with Forrest releases.
</p>

<p>Try to keep our sitemap.xmap and skinconf.xml and forrest.properties
in sync with the Forrest "fresh-site" stuff.
</p>

<p>
There is a hard-coded path in our sitemap to the DocBook XSL stylesheets.
If that is different on your system, then tweak the sitemap.xmap to suit.
</p>
    </section>

    <section id="todo">
      <title>Still to do</title>
<ul>
<li>Ask the '<code>forrestbot</code>' to build the xml-commons site.
See <link href="http://forrestbot.cocoondev.org/">http://forrestbot.cocoondev.org/</link> ... However, we need the DocBook stylesheets on moof.apache.org first.
</li>
<li>
Decide how to build the website to better combine the needs of the separate
components. See the isses listed on the
<link href="site:todo">To Do List</link>
</li>
</ul>
    </section>
  </body>
</document>
